## 引言

先从 HTTP 说起，HTTP 为明文传输，带来了三大风险：

- 窃听风险（ eavesdropping ）：第三方可以获知通信内容。
- 冒充风险（ pretending ）：第三方可以冒充他人身份参与通信。
- 篡改风险（ tampering ）：第三方可以修改通信内容。

为了解决这三大风险，我们需要一种协议，去解决：

- 所有信息都要加密传播，第三方无法窃听。
- 配备身份证书，防止身份被冒充。
- 具有校验机制，一旦被篡改，通信双方会立刻发现。

处于这样的目的，**SSL/TLS** 协议被设计出来了。

## 历史

> 互联网加密通信协议的历史，几乎与互联网一样长。

1. 1994 年，NetScape 公司设计了 SSL 协议（ Secure Sockets Layer ）的 1.0 版，但是未发布。

1. 1995 年，NetScape 公司发布 SSL 2.0 版，很快发现有严重漏洞。

1. 1996 年，SSL 3.0 版问世，得到大规模应用。

1. 1999 年，互联网标准化组织 ISOC 接替 NetScape 公司，发布了 SSL 的升级版 TLS 1.0 版。

1. 2006 年和 2008 年，TLS 进行了两次升级，分别为 TLS 1.1 版和 TLS 1.2 版。

1. 最新的变动是 2011 年 TLS 1.2 的修订版。

目前，应用最广泛的是 TLS 1.0，接下来是 SSL 3.0。但是，主流浏览器都已经实现了 TLS 1.2 的支持。

> TLS 1.0 通常被标示为 SSL 3.1，TLS 1.1 为 SSL 3.2，TLS 1.2 为 SSL 3.3。

## 基本的运行过程

SSL/TLS 协议的基本思路是采用[公钥加密法](https://zh.wikipedia.org/wiki/%E5%85%AC%E5%BC%80%E5%AF%86%E9%92%A5%E5%8A%A0%E5%AF%86)，也就是说，客户端先向服务器端索要公钥，然后用公钥加密信息，得到密文，发给服务器，服务器收到密文后，用自己的私钥解密，得到明文。

有两个问题：

**如何保证公钥不被篡改？**

> 将公钥放在数字证书中。只要证书是可信的，公钥就是可信的。

**公钥加密计算量太大，如何减少耗用的时间？**

> 每一次对话（ session ），客户端和服务器端都生成一个「对话密钥」（session key），用它来加密信息。由「"对话密」"是对称加密，所以运算速度非常快，而服务器公钥只用于加密「对话密钥」本身，这样就减少了加密运算的消耗时间。