### JavaScript 数据类型

JavaScript 是一种动态类型语言，变量没有类型限制，可以随时赋予**任意类型的**值。

一个变量或者常量（下面统称变量）具体是什么类型，只有等到代码运行的时候才可能知道。

数据类型的变换分为两种：**自动转换** 和 **强制转换**。

### 强制转换

#### 1. Number()

> 使用 Number 函数，可以将任意类型的值转化成数值。

`Number()` 的参数分为两种，一个是**原始类型**，一个是**对象类型**。

##### 1.1 原始类型

原始类型的值主要是字符串、布尔值、`undefined` 和 `null`，它们都能被 `Number` 转成 **数值** 或 **NaN**（ Not a Number ）。

```javascript
// 1. 数值：转换后还是原来的值
Number(324) // 324

// 2. 字符串：如果可以被解析为数值，则转换为相应的数值
Number('324') // 324

// 3. 字符串：如果不可以被解析为数值，返回 NaN
Number('324abc') // NaN

// 4. 空字符串转为0
Number('') // 0

// 5. 布尔值：true 转成1，false 转成0
Number(true) // 1
Number(false) // 0

// 6. undefined：转成 NaN
Number(undefined) // NaN

// 7. null：转成0
Number(null) // 0
```

了解 `parseInt()` 方法的同学可能有些不解第三个为什么转换出来不是 324。其实，Number 函数将字符串转为数值，要比 parseInt 函数严格很多。基本上，**只要有一个字符无法转成数值**，整个字符串就会被转为 NaN。因为 parseInt 是逐个解析字符，而 Number 则是将整体转换为字符串类型。

另外，和 parseInt 一样，Number 函数会自动过滤一个字符串前导和后缀的**空格**。

##### 1.2 对象类型

> 简单的规则是，Number 方法的参数是对象时，将返回 NaN，除非是包含单个数值的数组。

```javascript
Number({a: 1}) // NaN
Number([1, 2, 3]) // NaN
Number([5]) // 5
```

其实上面的那段解释，我个人觉得不方便记忆。其实就是把参数中的**对象**转换成**原始类型**，之前的笔记中也记录了很多次对象转原始类型的过程，这里再次记录一遍。

一个对象转化为基本类型的步骤如下：

> 1. 先调用该对象的 `valueOf()` 方法，如果返回值为 `基本类型` ，这个值就是最终值。
> 2. 否则，继续调用对象的 `toString()` 方法，如果返回值为 `基本类型` ，这个值就是最终值。
> 3. 都无法得到结果的话，抛出异常 `Error: Cannot convert object to primitive value` 。

    如果对象是 Date 实例，则先执行 toString() 方法

因为当个数值的数组对象的 `toString()` 方法返回的就是其中的数值字符串。其余数组的 `toString()` 方法返回的内容和该数组的 `join(',')` 方法的返回值相等。对象的 `toString()` 方法则是返回 `"[object Object]"`。

转换完成功后，将得到的原始类型的数据作为参数，传入到 Number 方法。以上的字符串内容若包含 `,` 、 `[object Object]` 等 Number 函数无法识别的内容，当然返回的就是 NaN 啦。

---

#### 2. String()

> 使用 String 函数，可以将**任意类型**的值转化成**字符串**。

`String()` 的参数分为两种，一个是**原始类型**，一个是**对象类型**。

##### 1.1 原始类型

```javascript
// 1. 数值：转为相应的字符串
String(123) // "123"

// 2. 字符串：转换后还是原来的值
String('abc') // "abc"

// 3. 布尔值：true 转为 "true"，false 转为 "false"
String(true) // "true"

// 4. undefined：转为"undefined"
String(undefined) // "undefined"

// 5. null：转为"null"
String(null) // "null"
```

##### 1.2 对象类型

`String()` 方法的参数如果是**对象**，返回一个类型的**字符串**；如果是数组，返回该数组的字符串形式。

```javascript
String({a: 1}) // "[object Object]"
String([1, 2, 3]) // "1,2,3"
```

其实，String 方法背后的转换规则，与 Number 方法基本相同，只是在将参数从对象转换到原始类型的步骤中，互换了 `valueOf()` 方法和 `toString()` 方法的**执行顺序**。执行后得到原始类型的再作为参数传入到 String 方法中。

---

#### 3. Boolean()

> 使用 Boolean 函数，可以将任意类型的变量转为布尔值。

转换规则：除了下面 6 个值经过 Boolean 函数转换后得到 `false`，其他都为 `true`。

- undefined
- null
- -0
- 0或+0
- NaN
- 空字符串

```javascript
Boolean(undefined) // false
Boolean(null) // false
Boolean(0) // false
Boolean(NaN) // false
Boolean('') // false
```

**!!! 注意**，所有对象（包括空对象）的转换结果都是 `true`，甚至连 `false` 对应的布尔对象 `new Boolean(false)` 也是 `true`。

```javascript
Boolean({}) // true
Boolean([]) // true
Boolean(new Boolean(false)) // true
```