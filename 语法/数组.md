### 数组的本质

本质上，数组属于一种特殊的**对象**。

其特殊性体现在，它的**键名**是按次序排列的一组整数（0，1，2…）。

`Object.keys()` 方法返回数组的所有键名。可以看到数组的键名就是整数0、1、2。

JavaScript 语言规定，对象的键名一律为 `字符串` ，所以，数组的键名其实也是 `字符串` 。之所以可以用数值读取，是因为非字符串的键名会被转为字符串。

对象有两种读取成员的方法：「点」结构（如： `object.key` ）和「方括号」结构（如： `object[key]` ）。但是，对于数值的键名，不能使用点结构。

```javascript
var arr = [1, 2, 3]
arr.0 // SyntaxError
```

`arr.0` 的写法不合法，因为单独的数值**不能作为标识符**（identifier）。所以，数组成员只能用方括号 `arr[0]` 表示（方括号是运算符，可以接受数值）。

---

### length 属性

数组的数字键不需要连续，`length` 属性的值总是比最大的那个整数键大 **1** 。另外，这也表明数组是一种动态的数据结构，可以随时增减数组的成员。

```javascript
var arr = ['a', 'b']
arr.length // 2

arr[2] = 'c'
arr.length // 3

arr[9] = 'd'
arr.length // 10

arr[1000] = 'e'
arr.length // 1001
```

`length` 属性是可写的。如果人为设置一个小于当前成员个数的值，该数组的成员会自动减少到 `length` 设置的值。

```javascript
var arr = [ 'a', 'b', 'c' ]
arr.length // 3

arr.length = 2
arr // ["a", "b"]
```

所以，清空数组的方法可以是 `array.length = 0`

```javascript
var arr = [ 'a', 'b', 'c' ]

arr.length = 0
arr // []
```

该操作是不可恢复的，如：将一个数组清空后（`length = 0`），`length` 设置回原来的值，数组内容均为空，调用时均返回 `undefined` 。

**!!!** 由于数组本质上是对象的一种，所以我们可以为数组添加属性，但是这不影响 `length` 属性的值。因为，`length` 属性的值就是等于最大的**数字键**加 **1** ，而这个数组没有整数键，所以 `length` 属性保持为 **0**。

```javascript
var a = []

a['p'] = 'abc'
a.length // 0

a[2.1] = 'abc'
a.length // 0
```

如果数组的**键名**是添加**超出范围**的数值，该键名会自动转为字符串。

```javascript
var arr = []
arr[-1] = 'a'
arr[Math.pow(2, 32)] = 'b'

arr.length // 0
arr[-1] // "a"
arr[4294967296] // "b"
```

---

### 类数组对象

> 如果一个对象的所有键名都是零或正整数，且具有 `length` 属性，那么就称其为「类数组对象」(Array-like Object)。

「类数组对象」并不是**数组**，因为它们不具备数组特有的方法（ 如: `push` )。

「类数组对象」的**根本特征**，就是具有 `length` 属性。只要有 `length` 属性，就可以认为这个对象类似于数组。但是有一个问题，这种 `length` 属性不是**动态值**，不会随着成员的变化而变化。

```javascript
// DOM元素集
var ele = document.getElementsByTagName('p')
ele.length // 5
ele instanceof Array  // false
ele instanceof Object // true

// 字符串
'abc'[1] // 'b'
'abc'.length // 3
'abc' instanceof Array // false
```

`Array` 的 `slice()` 方法，可以将「类数组对象」转为真正的数组。

```javascript
var arr = Array.prototype.slice.call(arrayLike)
```